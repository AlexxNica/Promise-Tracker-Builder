<div id="workspace">
  <div class="row" style="display: none;" data-bind="visible: true">
    
    <!-- Form title -->
    <div class="col-md-8">
      <h4 id="formTitle" class="inline" data-bind="text: title"></h4>
      <div class="controls pad-top">
        <div class="btn btn-default" data-toggle="modal" data-target="#newFormModal"><%= t("surveys.new.edit_survey_title") %></div>
      </div>
      <%= render 'new_form_modal' %>
    </div>

    <!-- Form body -->
    <div class="col-md-8">
      <div id="formBody">
        
        <div data-bind="sortable: inputs">
          <div class="input">

            <!-- Editing template -->
            <div data-bind="if: inEdit">
              <input type="text" class="form-control" data-bind="value: label, valueUpdate:'input'" placeholder="Add question text here" autofocus>
              <label><%= t("surveys.new.inputs.required") %></label><input type="checkbox" data-bind="checked: required">

              <div class="modify">
                <a href="#" class="btn" data-bind="click: save"><%= t("surveys.new.save") %></a>
                <a href="#" class="btn" data-bind="click: $parent.removeInput"><span class="glyphicon glyphicon-trash"></span></a>
              </div>

              <!-- ko if: input_type() === 'select' || input_type() === 'select1'  -->
              <div class="options">
                <hr>
                <p><%= t("surveys.new.inputs.options") %> <span class="glyphicon glyphicon-plus-sign" data-bind="click: addOption"></span></p>
                <div data-bind="foreach: options, valueUpdate:'input'">
                  <div class="option">
                    <input data-bind="value: $parent.options()[$index()], valueUpdate:'input'" autofocus>
                    <span class="glyphicon glyphicon-remove-sign delete-option"data-bind="click: $parent.deleteOption"></span>
                  </div>
                </div>
              </div>
              <!-- /ko -->
            </div>

            <!-- Viewing template -->
            <div data-bind="ifnot: inEdit">
              <p data-bind="text: $data.label"></p>
              <div class="controls">
                <a href="#" class="btn" data-bind="click: edit"><%= t("surveys.new.edit") %></a>
                <a href="#" class="btn" data-bind="click: $parent.removeInput"><span class="glyphicon glyphicon-trash"></span></a>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Done button -->
      <div class="controls">
        <button class="btn btn-primary" data-bind="click: saveOrder">Done</button>
      </div>
    </div>

    <!-- Input Tool palette -->
    <div class="col-md-4">
      <div id="toolPalette">
        <%= render 'tool_palette' %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  PT.form = new PT.FormModel();
  ko.applyBindings(PT.form);
  $("#newFormModal").modal();
  $("#toolPalette .toolButton").on("click", PT.form.addInput);
</script>

