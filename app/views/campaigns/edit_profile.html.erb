<div class="page-container">
  <h2 class="title inline"><%= t("campaign_profile") %></h2>
  <p>
    Below is a public page that will describe your campaign. The public link can be used to share with friends and others as you collect and share your data.
  </p>
  <br>
</div>

<div class="section grey">
  <div class="page-container pad-top">

    <div id="campaign-profile" class="preview">
      <%= form_for @campaign do |f| %>
        <%= f.text_field :title, class: "campaign-title" %>

        <div class="row">
          <div class="col-sm-10">
            <div class="form-group"> 
              <%= f.label :description %>
              <%= f.text_area :description, rows: 4, placeholder: "Type a description of your campaign here", class: "form-control" %>
            </div>
          </div>
        </div>
        <br>

        <div class="row">
          <div class="col-sm-10">
            <div class="right">
              <%= f.check_box :anonymous %> <%= t(".remain_anonymous") %>
            </div>
            <div class="form-group"> 
              <%= f.label :organizers %>
              <%= f.text_area :organizers, rows: 2, class: "form-control" %>
            </div>
          </div>
        </div>
        <br>

        <div class="row">
          <div class="col-sm-10">
            <label><%= Survey.model_name.human %></label>
            <div id="campaign-survey">
              <%= render partial: "surveys/survey_body", locals: {survey: @survey} %>
            </div>
          </div>
        </div>
        <br>

        <div class="highlight">
          <%= render partial: "campaigns/how_to_participate", locals: {survey: @survey} %>
        </div>
      </div>
    </div>

    <div class="row pad-bottom">
      <div class="button-group center clear">
        <hr>
        <%= f.submit t("defaults.save"), class: "btn btn-info" %>
      </div>
    </div> 
    <% end %>
  </div>
</div>

<script type="text/javascript"> 
  $("#input-list").sortable({ disabled: true });

  $(".edit_campaign").on("submit", function(){
    if(!PT.validateProfile(this)){
      PT.scrollToError();
      return false;
    }
  });

  $("#campaign_anonymous").on("change", function (){
    if($(this).is(":checked")){
      $("#campaign_organizers").hide();
      $(this).parents(".row").find(".error").hide();
    } else {
      $("#campaign_organizers").show();
    }
  })

   $("#campaign_anonymous").trigger("change");
</script>