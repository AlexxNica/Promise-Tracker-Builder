<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa">
  <h:head>
    <h:title><%= survey.campaign.title %></h:title>
    <model>
      <instance>
        <data id="<%= survey.guid %>">
          <meta>
            <instanceID/>
          </meta>
          <% survey.inputs.each do |input| %>
          <<%= input.guid %>/>
          <% end %>
        </data>
      </instance>
      <itext>
        <translation lang="eng">
          <% survey.inputs.each do |input| %>
          <text id="/data/<%= input.guid %>:label">
            <value><%= input.label %></value>
          </text>  
          <% if input.options %>
          <% input.options.values.each_with_index do |label, index| %>
          <text id="/data/<%= input.guid %>:option<%= index %>">
            <value><%= label %></value>
          </text>
          <% end %> 
          <% end %>  
          <% end %>
        </translation>
      </itext>
      <bind nodeset="/data/meta/instanceID" type="string" readonly="true()" calculate="concat('uuid:', uuid())"/>
      <% survey.inputs.each do |input| %>
      <bind nodeset="/data/<%= input.guid %>" type="<%= input.input_type %>"/>
      <% end %>
    </model>
  </h:head>
  <h:body>
    <% survey.inputs.each do |input| %>
    <%= render_xml(input) %>
    <% end %> 
  </h:body>
</h:html>