<!DOCTYPE html>
<html>
  <head>
    <title><%= t("app_name") %></title>
    <%= render "layouts/include_links" %>
    <%= yield :head %>
  </head>
  
  <body data-no-turbolink="true">
    <%= render "layouts/site_header" %>
    <%= render "campaigns/campaign_header" %>
    <%= yield %>
  </body>


  <script>
  
    //Campaign progress bar

    $("li[data-path ~= <%= action_name %>]").addClass("active");
    $("li[data-complete = true]").addClass("complete");
    $("li[data-clickable = false]").css("pointer-events", "none");

    $(document).on("ajax:error", function(e, data, status, xhr){
      errors = data.responseJSON.errors;
      errors.forEach(function(error){
        $("#errors ul").empty();
        $("#errors ul").append("<li>" + errors + "</li>");
      });
      $("#errors").addClass("alert alert-danger");
      $("#errors").show();
    });

    $("#errors .close").on("click", function(){
      $(this).parent().hide();
    });

    //Navigations tabs

    $(".tab[data-action~=<%= action_name %>]").addClass("active");
    $(".tab[data-visible='false']").hide();

  </script>
</html>